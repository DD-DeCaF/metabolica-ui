<!--Copyright 2018 Novo Nordisk Foundation Center for Biosustainability, DTU.-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<md-toolbar ng-hide="shouldHideMenus()"
            ng-style="{backgroundColor: $ctrl.project.color}"
            class="md-theme-light color-transition"
            layout="row">
  <div class="md-toolbar-tools">
    <md-button ng-hide="$ctrl.appCtrl.isSidenavOpen('left')" ng-click="$ctrl.appCtrl.openSidenav('left')"
               class="md-icon-button">
      <md-icon aria-label="Menu">menu</md-icon>
    </md-button>

    <search-toolbar>
      <h1>{{ $ctrl.getTitle() }}</h1>
      <span flex></span>
    </search-toolbar>

    <clipboard-menu></clipboard-menu>

    <md-menu ng-show="$ctrl.sharing.targets.length" md-position-mode="target-right target">
      <md-button class="md-icon-button" ng-click="$mdOpenMenu($event)">
        <md-icon md-svg-icon="share"></md-icon>
      </md-button>

      <md-menu-content width="4">
        <md-menu-item ng-repeat="target in $ctrl.sharing.targets">
          <md-button ng-click="$ctrl.sharing.open(target.state)">
            <div layout="row">
              <p flex>{{ target.name }}</p>
              <md-icon md-svg-icon="share" md-menu-align-target></md-icon>
            </div>
          </md-button>
        </md-menu-item>
      </md-menu-content>
    </md-menu>

    <md-menu>
      <md-button aria-label="More" class="md-icon-button" ng-click="$mdMenu.open($event)">
        <md-icon>more_vert</md-icon>
      </md-button>
      <md-menu-content width="4">
        <md-menu-item ng-repeat="component in $ctrl.navigation">
          <md-button ui-sref="{{ component.state }}">
            <md-icon md-svg-icon="{{ component.icon }}"></md-icon>
            {{ component.title }}
          </md-button>
        </md-menu-item>
        <md-menu-divider ng-if="$ctrl.navigation.length"></md-menu-divider>
        <md-menu-item>
          <md-button ui-sref="app.docs">
            <md-icon>book</md-icon>
            API Documentation
          </md-button>
        </md-menu-item>
        <md-menu-divider></md-menu-divider>
        <md-menu-item ng-if="$ctrl.isAuthenticated">
          <md-button ng-click="$ctrl.logout()">
            <md-icon>lock</md-icon>
            Log Out
          </md-button>
        </md-menu-item>
        <md-menu-item ng-if="!$ctrl.isAuthenticated">
          <md-button ng-click="$ctrl.login()">
            <md-icon>lock</md-icon>
            Log In
          </md-button>
        </md-menu-item>
      </md-menu-content>
    </md-menu>
  </div>
</md-toolbar>
