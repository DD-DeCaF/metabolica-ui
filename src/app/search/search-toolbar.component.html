<!--Copyright 2018 Novo Nordisk Foundation Center for Biosustainability, DTU.-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<ng-transclude ng-hide="$ctrl.showSearch" flex></ng-transclude>

<md-autocomplete
  ng-if="$ctrl.showSearch"
  md-autofocus="true"
  md-selected-item="$ctrl.selectedItem"
  md-search-text-change="$ctrl.searchTextChange(ctrl.searchText)"
  md-search-text="$ctrl.searchText"
  md-selected-item-change="$ctrl.selectedItemChange(item)"
  md-items="item in $ctrl.query($ctrl.searchText)"
  md-item-text="item.text"
  md-min-length="2"
  placeholder="Search plates, media, pools, strains, experiments and more..."
  flex>
  <md-item-template>
    <div layout="row">
      <span md-highlight-text="$ctrl.searchText" md-highlight-flags="^i">{{ item.text }}</span>
      <span flex></span>
      <span class="md-caption">{{ item.source.name }}</span>
    </div>
  </md-item-template>
  <md-not-found>
    No matches found for "{{$ctrl.searchText}}".
  </md-not-found>
</md-autocomplete>

<md-button aria-label="More" class="md-icon-button" ng-click="$ctrl.toggleSearch()">
  <md-icon ng-hide="$ctrl.showSearch">search</md-icon>
  <md-icon ng-show="$ctrl.showSearch">cancel</md-icon>
</md-button>
