<\!--Copyright 2018 Novo Nordisk Foundation Center for Biosustainability, DTU.-->

<\!--Licensed under the Apache License, Version 2.0 (the "License");-->
<\!--you may not use this file except in compliance with the License.-->
<\!--You may obtain a copy of the License at-->

<\!--http://www.apache.org/licenses/LICENSE-2.0-->

<\!--Unless required by applicable law or agreed to in writing, software-->
<\!--distributed under the License is distributed on an "AS IS" BASIS,-->
<\!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<\!--See the License for the specific language governing permissions and-->
<\!--limitations under the License.-->

<md-content md-colors="{background: 'default-accent-200'}" ui-view layout="column" flex>
    <md-toolbar class="md-accent md-hue-1 md-whiteframe-z1">
        <div class="md-toolbar-tools">
            <h2>Documentation for the API backend of {{ $ctrl.appName }}</h2>
            <span flex></span>
            <md-button hide-gt-md
                       ng-click="$ctrl.toggleSidenav('right')"
                       class="md-icon-button">
                <md-icon aria-label="Menu">menu</md-icon>
            </md-button>
        </div>
    </md-toolbar>
    <md-content md-colors="{background: 'default-accent-200'}" layout-padding flex>
        <md-card md-colors="{background: 'default-primary-000'}">
            <md-card-content>
                <h3 class="md-title">Guidelines for API use:</h3>

                <ul>
                    <li>As a user you are very welcome to query the API (i.e. make GET requests).</li>
                    <li>The API is under active development is is subject to unannounced changes.</li>
                    <li>Before using the API for submitting data (i.e. making POST requests) you should first
                        inquire for instructions in the use of the API.
                    </li>
                    <li>If you intend to make a large number of queries, please clear this first with <a
                            href="mailto:lays@biosustain.dtu.dk">Lars Sch√∂ning</a>.
                    </li>
                </ul>

                <h3 class="md-title">Authentication</h3>

                <p>This API uses <em>Bearer Authentication</em> together with personal access tokens.
                    You can generate a personal access token in your <a ui-sref="settings">Account Settings</a>.</p>

                <p>The token should be provided in the <em>Authorization</em> HTTP header using <em>Bearer</em>
                    authentication.
                    You can also use use <em>Basic</em> authentication, in which case you should set the token as
                    the username and set the password to <code>x-oauth-basic</code>.</p>

                <h3 class="md-title">Accessing the API</h3>

                <ul>
                    <li><strong>Command line:</strong> Rather than using curl you are encouraged to install
                        <a href="http://httpie.org" target="_blank">HTTPie</a>, which is a command line tool
                        designed to query
                        JSON-based
                        APIs such as this one.
                    </li>
                    <li><strong>Python:</strong> Use <a
                            href="https://github.com/biosustain/potion-client" target="_blank">Potion-client</a>
                        or <a href="http://$ctrl.python-requests.org/en/latest/" target="_blank">Requests</a>.
                    </li>
                    <li><strong>JavaScript:</strong> Inquire with Lars about the best option for your project.</li>
                </ul>

                <h3 class="md-title">About the API</h3>

                <p>This API has been generated using <a href="https://potion.readthe$ctrl.org"
                                                        target="_blank">Potion</a>.
                    Reading the Potion documentation is helpful for understanding the features this API provides.
                </p>

                <p> Relationships between resources are represented by <code>{"$ref": URI}</code> objects. Dates are
                    represented by <code>{"$date": MILLISECONDS_SINCE_EPOCH}</code>.</p>

                <p> The API is documented by JSON-Schema. You can use the links to your right to view basic
                    information about the different resources.</p>

                <h3 class="md-title">Access from other sites</h3>

                <p>Cross-Domain API access via Cross-origin resource sharing (CORS) is available.</p>
            </md-card-content>
        </md-card>
    </md-content>
</md-content>

<md-sidenav class="md-sidenav-right md-whiteframe-z1"
            md-is-locked-open="$mdMedia('gt-md')"
            md-component-id="right"
            layout="column">
    <md-toolbar class="md-accent md-hue-1 md-whiteframe-z1">
        <h4 class="md-toolbar-tools">
            <a ui-sref="docs">API Resources</a>
        </h4>
    </md-toolbar>

    <md-content>
        <md-list>
            <md-list-item
                    ng-repeat="resourceName in $ctrl.resourceNames"
                    ui-sref=".resource({resourceName: resourceName})">
                <md-icon md-svg-icon="docs:resource"></md-icon>
                <p>{{ resourceName }}</p>
            </md-list-item>
        </md-list>
    </md-content>
</md-sidenav>
