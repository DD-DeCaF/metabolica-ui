<!--Copyright 2018 Novo Nordisk Foundation Center for Biosustainability, DTU.-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<md-content class="md-hue-2 login-bg"
            md-colors="{background: 'default-primary-700'}"
            layout="column"
            layout-align="center center"
            flex>

    <form class="login-form" name="loginForm">
        <md-card layout="column" style="min-width: 650px" layout-padding>
            <md-card-content layout="column">

                <h1 class="md-display-5">{{ $ctrl.appName }}</h1>

                <p>Enter your username and password to log in.</p>

                <md-input-container class="md-icon-float md-icon-left"> <!--TODO: md-icon-left is a temp fix, remove once AM fixes this-->
                    <!-- Use floating label instead of placeholder -->
                    <label>Username</label>
                    <md-icon>person</md-icon>
                    <input ng-disabled="loginForm.$submitted"
                           ng-model="$ctrl.credentials.username"
                           ng-change="loginForm.password.$setValidity('auth', true)"
                           id="username"
                           name="username"
                           type="text"
                           required>

                    <div ng-messages="loginForm.username.$error" ng-if="loginForm.username.$touched">
                        <div ng-message="required">You <b>must</b> specify a username.</div>
                    </div>
                </md-input-container>

                <md-input-container class="md-icon-float md-icon-left"> <!--TODO: md-icon-left is a temp fix, remove once AM fixes this-->
                    <!-- Use floating label instead of placeholder -->
                    <label>Password</label>
                    <md-icon>lock</md-icon>
                    <input ng-disabled="loginForm.$submitted"
                           ng-model="$ctrl.credentials.password"
                           ng-change="loginForm.password.$setValidity('auth', true)"
                           id="password"
                           name="password"
                           type="password"
                           required>

                    <div ng-messages="loginForm.password.$error" ng-if="loginForm.password.$touched">
                        <div ng-message="required">You <b>must</b> specify a password.</div>
                        <div ng-message="auth">Your username or password are incorrect.</div>
                    </div>
                </md-input-container>

                <div layout="row" flex>
                    <span flex></span>
                    <md-button
                            type="submit"
                            ng-disabled="loginForm.$invalid || loginForm.$submitted"
                            ng-click="$ctrl.authenticate(loginForm, $ctrl.credentials)" class="md-primary md-raised">Login
                    </md-button>
                </div>
            </md-card-content>
        </md-card>
    </form>
</md-content>
